# Node.js 20 Alpine sÃ¼rÃ¼mÃ¼ ile baÅŸlat
FROM node:20-alpine

# Ã‡alÄ±ÅŸma dizinini belirle
WORKDIR /app

# package.json ve baÄŸÄ±mlÄ±lÄ±klarÄ± kopyala
COPY package.json package-lock.json ./

# BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kle
RUN npm install

# `serve` paketini global olarak yÃ¼kle (ğŸ“Œ Yeni eklendi)
RUN npm install -g serve

# Proje dosyalarÄ±nÄ± kopyala
COPY . .

# Frontend build iÅŸlemini gerÃ§ekleÅŸtir
RUN npm run build

# `dist` klasÃ¶rÃ¼nÃ¼ doÄŸrula (kontrol amaÃ§lÄ±)
RUN ls -la dist

# `serve` paketi ile statik dosyalarÄ± sun (ğŸ“Œ GÃ¼ncellendi)
CMD ["serve", "-s", "dist", "-l", "3003"]
